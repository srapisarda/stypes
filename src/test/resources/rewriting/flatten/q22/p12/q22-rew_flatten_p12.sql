WITH p3 AS (SELECT a_0.x AS X0, r_1.y AS X1 FROM a AS a_0 INNER JOIN r AS r_1 ON a_0.x = r_1.x UNION (SELECT s_0.x AS X0, r_2.y AS X1 FROM s AS s_0 INNER JOIN r AS r_1 ON s_0.y = r_1.x INNER JOIN r AS r_2 ON r_1.y = r_2.x)), p1 AS (SELECT p3_0.X0 AS X0, s_4.y AS X1 FROM p3 AS p3_0 INNER JOIN r AS r_1 ON p3_0.X1 = r_1.x INNER JOIN r AS r_2 ON r_1.y = r_2.x INNER JOIN r AS r_3 ON r_2.y = r_3.x INNER JOIN s AS s_4 ON r_3.y = s_4.x UNION (SELECT p3_0.X0 AS X0, r_2.y AS X1 FROM p3 AS p3_0 INNER JOIN r AS r_1 ON p3_0.X1 = r_1.x INNER JOIN r AS r_2 ON r_1.y = r_2.x INNER JOIN b AS b_3 ON r_2.y = b_3.x)) SELECT p1.X0 AS x, p1.X1 AS y FROM p1
