p(X):-a(X),b(X).
q(X, Y) :- a(X), p(X), r(X, Y), p(Y), b(Y).